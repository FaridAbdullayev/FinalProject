﻿@using System.Security.Claims
@using HotelUI.Services
@inject ILayoutService layoutService
@{
    var profile = await layoutService.GetProfile();
}
<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Star Admin</title>
    <link rel="stylesheet" href="~/node_modules/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="~/node_modules/perfect-scrollbar/dist/css/perfect-scrollbar.min.css" />
    <link rel="stylesheet" href="~/node_modules/flag-icon-css/css/flag-icon.min.css" />
    <link rel="stylesheet" href="~/css/style.css" />
    <link rel="stylesheet" href="~/css/style2.css" />
    <link rel="shortcut icon" href="~/images/favicon.png" />
</head>

<body>
    <div class=" container-scroller">
        <!-- partial:partials/_navbar.html -->
        <nav class="navbar navbar-default col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
            <div class="bg-white text-center navbar-brand-wrapper">
                <a class="navbar-brand brand-logo" asp-action="index" asp-controller="home"><img src="~/images/logo_star_black.png" /></a>
                <a class="navbar-brand brand-logo-mini" href="~/index.html"><img src="~/images/logo_star_mini.jpg" alt=""></a>
            </div>
            <div class="navbar-menu-wrapper d-flex align-items-center">
                <button class="navbar-toggler navbar-toggler d-none d-lg-block navbar-dark align-self-center mr-3" type="button" data-toggle="minimize">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <ul class="navbar-nav ml-lg-auto d-flex align-items-center flex-row">
                    <li class="nav-item">
                        <a class="nav-link" asp-action="profile" asp-controller="account">@profile.UserName</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-action="logout" asp-controller="account">Logout</a>
                    </li>
                </ul>
                <button class="navbar-toggler navbar-dark navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
        </nav>

        <!-- partial -->
        <div class="container-fluid">
            <div class="row row-offcanvas row-offcanvas-right">
                <!-- partial:partials/_sidebar.html -->
                <nav class="bg-white sidebar sidebar-offcanvas" id="sidebar">
                    <ul class="nav">
                        <li class="nav-item active">
                            <a class="nav-link" asp-action="index" asp-controller="home">
                                <img src="~/images/icons/1.png" alt="">
                                <span class="menu-title">Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="branch">
                                <img src="~/images/icons/2.png" alt="">
                                <span class="menu-title">Branch</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="service">
                                <img src="~/images/icons/005-forms.png" alt="">
                                <span class="menu-title">Service</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="ourstaff">
                                <img src="~/images/icons/4.png" alt="">
                                <span class="menu-title">Staff</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="slider">
                                <img src="~/images/icons/5.png" alt="">
                                <span class="menu-title">Slider</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="room">
                                <img src="~/images/icons/6.png" alt="">
                                <span class="menu-title">Room</span>
                            </a>
                        </li>

                        @if (profile.Role == "SuperAdmin")
                        {
                            <li class="nav-item">
                                <a class="nav-link" asp-action="showadmin" asp-controller="account">
                                    <img src="~/images/icons/002-edit-text.png" alt="">
                                    <span class="menu-title">Admin</span>
                                </a>
                            </li>

                        }
                       
                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="bedtype">
                                <img src="~/images/icons/8.png" alt="">
                                <span class="menu-title">BedType</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="contact">
                                <img src="~/images/icons/014-chat.png" alt="">
                                <span class="menu-title">Contacts</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="setting">
                                <img src="~/images/icons/10.png" alt="">
                                <span class="menu-title">Settings</span>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="review">
                                <img src="~/images/icons/002-test.png" alt="">
                                <span class="menu-title">Review</span>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" asp-action="index" asp-controller="reservation">
                                <img src="~/images/icons/004-sheet.png" alt="">
                                <span class="menu-title">Reservation</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <!-- partial -->
                @RenderBody()



                <!-- partial -->


            </div>
        </div>

    </div>

    <script src="~/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="~/node_modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="~/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="~/node_modules/chart.js/dist/Chart.min.js"></script>
    <script src="~/node_modules/perfect-scrollbar/dist/js/perfect-scrollbar.jquery.min.js"></script>
    @* <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB5NXz9eVnyJOA81wimI8WYE08kW_JMe8g&callback=initMap" async defer></script> *@
    <script src="~/js/off-canvas.js"></script>
    <script src="~/js/hoverable-collapse.js"></script>
    <script src="~/js/misc.js"></script>
    <script src="~/js/maps.js"></script>
    @RenderSection("scripts", required: false)
    <script src="~/js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="~/js/app-pie-chart.js"></script>
    <script src="~/js/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/5.0.11/signalr.min.js"></script>
    <script>
        const connection = new signalR.HubConnectionBuilder()
            .withUrl("https://localhost:7119/reservationHub")
            .build();

        console.log(connection)

        connection.on("ReceiveReservationAlert", (message) => {
            alert(message);
        });

        connection.start().catch(err => console.error(err.toString()));
    </script>

   
</body>

</html>
